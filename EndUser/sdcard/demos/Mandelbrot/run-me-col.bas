1 REM Char-based Color Mandelbrot, 80 Column
2 SET FAST ON
3 SCREEN 3
5 CLS 6,15
6 GOSUB _OPGET
7 GOSUB _NPSET
8 LOCATE 32,22
9 PRINT"Generating Mandelbrot"
10 LOCATE 30,22
15 FOR Y=-2 TO 2 STEP 0.2
20 FOR X=-2 TO 2 STEP 0.1
30 N=0
40 V=X
50 W=Y
60 IF V*V+W*W<4 AND N<15 THEN 140
70 A=Y*5+10
80 B=X*10+20
90 P=(B+A*80)+22
95 P2=(B+A*80)+22
100 POKE COLOR P,(N*(N+1))+N
101 POKE SCREEN P2,134
110 NEXTX
120 NEXTY
130 GOTO 190
140 Z=V
150 V=V*V-W*W+X
160 W=2*W*Z+Y
170 N=N+1
180 GOTO 60
190 LOCATE 32,22
200 PRINT"Press any key to exit"
205 LOCATE 39,11
210 K=GETKEY
300 GOSUB _OPSET
400 CLS
500 SET FAST OFF
600 END
1000 _OPGET
1005 REM Save original palette
1010 OP$=GETPALETTE$(0)
1020 RETURN
1100 _NPSET
1110 REM Define Color Palette
1120 DEF RGBLIST N1$=15,0,8;0,3,15;0,6,15;0,9,15
1130 DEF RGBLIST N2$=1,12,14;3,14,12;5,15,9;7,15,6
1140 DEF RGBLIST N3$=9,15,3;11,15,1;13,12,0;15,9,0
1150 DEF RGBLIST N4$=15,6,0;15,3,0;15,0,0;0,0,0
1160 NP$ = N1$+N2$+N3$+N4$
1170 SET PALETTE 0 TO NP$
1199 RETURN
1200 _OPSET
1201 REM Restore original palette
1210 SET PALETTE 0 TO OP$
1212 CLS
1215 SCREEN 1
1217 CLS
1220 RETURN
